(function(a){a.fn.imageCaption=function(d){var c=a.extend({captionContainer:'<span class="re-imagecaption-wrapper" />',imageWrapper:'<span class="re-imagecaption-image" />',captionWrapper:'<span class="re-imagecaption-caption" />'},d);return this.each(function(d,e){if(a(e).attr("title")!=""){var b=a(e).removeAttr("align").removeAttr("border").removeAttr("style");$width=b.width();$parent=b.parent();$replace=$parent.is("a")?$parent:b;$caption=a(c.captionContainer).addClass(b.attr("class")).append(a(c.imageWrapper).html($replace.clone())).append(a(c.captionWrapper).text(b.attr("title"))).find("img").removeAttr("class").parents(".re-imagecaption-wrapper");
$width>0&&$caption.width($width);$replace.replaceWith($caption)}})}})(jQuery);